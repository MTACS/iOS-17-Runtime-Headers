
@interface IMDCKAttachmentSyncController : IMDCKAbstractSyncController {
    IMDCKAttachmentSyncCKOperationFactory * _CKOperationFactory;
    bool  _assetDownloadInProgress;
    NSObject<OS_dispatch_queue> * _ckQueue;
    NSMutableDictionary * _completionBlocksForAssetFetchOperations;
    unsigned long long  _deviceConditionsToCheck;
    NSMutableArray * _downloadAssetsForTransferGUIDs;
    bool  _isDoingDeleteRecoverySync;
    id /* block */  _perTransferProgress;
    NSMutableDictionary * _recordIDToTransferMap;
    IMDRecordZoneManager * _recordZoneManager;
    <SyncTokenStoreProviding> * _syncTokenStore;
}

@property (nonatomic, retain) IMDCKAttachmentSyncCKOperationFactory *CKOperationFactory;
@property (nonatomic) bool assetDownloadInProgress;
@property (nonatomic, retain) NSObject<OS_dispatch_queue> *ckQueue;
@property (nonatomic, retain) NSMutableDictionary *completionBlocksForAssetFetchOperations;
@property (nonatomic) unsigned long long deviceConditionsToCheck;
@property (nonatomic, retain) NSMutableArray *downloadAssetsForTransferGUIDs;
@property (nonatomic) bool isDoingDeleteRecoverySync;
@property (nonatomic, copy) id /* block */ perTransferProgress;
@property (nonatomic, retain) NSMutableDictionary *recordIDToTransferMap;
@property (nonatomic, retain) IMDRecordZoneManager *recordZoneManager;
@property (nonatomic, retain) <SyncTokenStoreProviding> *syncTokenStore;

+ (id)sharedInstance;

- (void).cxx_destruct;
- (id)CKOperationFactory;
- (id)__databaseRequestForAttachmentsWithAssets;
- (bool)__shouldOptimizeAttachmentDefault;
- (unsigned long long)_attachmentDeleteBatchSize;
- (bool)_attachmentDownloadCanStart:(bool)arg1 withActivity:(id)arg2;
- (bool)_attachmentZoneCreated;
- (id)_attachmentZoneID;
- (id)_attachmentZoneSalt;
- (id)_changeTokenKeyForSyncType:(long long)arg1;
- (id)_ckUtilitiesInstance;
- (id)_constructAttachmentRecordIDUsingTombStoneDictionary:(id)arg1;
- (id)_copyRecordIDsToDeleteWithLimit:(unsigned long long)arg1;
- (void)_deleteAttachmentsWithRecordIDs:(id)arg1 completion:(id /* block */)arg2;
- (bool)_deviceConditionsAllowsMessageSyncForCurrentBatchCount:(long long)arg1 maxBatchCount:(long long)arg2 activity:(id)arg3;
- (bool)_deviceConditionsAllowsMessageSyncIgnoreFeatureEnabled:(bool)arg1 activity:(id)arg2;
- (bool)_deviceConditionsAllowsMessageSyncWithActivity:(id)arg1;
- (void)_downloadAttachmentAssetsWithActivity:(id)arg1 restoringAttachments:(bool)arg2 retryCount:(unsigned long long)arg3 numAttachmentsDownloaded:(unsigned long long)arg4 completion:(id /* block */)arg5;
- (void)_downloadAttachmentAssetsWithActivity:(id)arg1 restoringAttachments:(bool)arg2 retryCount:(unsigned long long)arg3 numAttachmentsDownloaded:(unsigned long long)arg4 transfers:(id)arg5 completion:(id /* block */)arg6;
- (id)_fetchAndPrepareRecordsToWrite:(bool*)arg1;
- (void)_fetchAndValidateFileTransfersFromCloudKit:(id)arg1 capturedWithABC:(bool)arg2 activity:(id)arg3 completion:(id /* block */)arg4;
- (void)_fetchAttachmentZoneChangesShouldWriteBackChanges:(bool)arg1 desiredKeys:(long long)arg2 syncType:(long long)arg3 currentBatchCount:(long long)arg4 maxBatchCount:(long long)arg5 syncToken:(id)arg6 activity:(id)arg7 completionBlock:(id /* block */)arg8;
- (void)_fetchAttachmentZoneRecords:(id)arg1 desiredKeys:(long long)arg2 ognSuffix:(id)arg3 removeTombstones:(bool)arg4 activity:(id)arg5 completion:(id /* block */)arg6;
- (bool)_fetchedAllChangesFromCloudKit;
- (bool)_hasCompletedRecoveryResync;
- (void)_hasMarkedAllAttachmentsAsNeedingSync;
- (void)_initResyncForDeleteRecovery;
- (void)_kickOffAssetFetchForTransfersIfNeededWithActivity:(id)arg1;
- (bool)_kickOffWriteIfNeededForSyncType:(long long)arg1 activity:(id)arg2 completion:(id /* block */)arg3;
- (void)_kickOffWriteOnCKQueueWithActivity:(id)arg1 completion:(id /* block */)arg2;
- (void)_markAllFailedAttachmentsAsNeedingSync;
- (void)_markAttachmentWithROWIDAsFailedToUploadToCloudKit:(id)arg1;
- (void)_markAttachmentWithROWIDAsSyncedWithCloudKit:(long long)arg1;
- (void)_markResyncForDeleteRecoveryAs:(int)arg1;
- (void)_markTransferAsNotBeingAbleToSync:(id)arg1;
- (void)_markTransferAsNotBeingAbleToSyncUsingCKRecord:(id)arg1;
- (void)_migrateSyncToken;
- (void)_needsToMarkAllAttachmentsAsNeedingSync;
- (unsigned long long)_numberOfAttachmentsToDownload;
- (unsigned long long)_numberOfAttachmentsToWriteUp;
- (long long)_numberOfBatchesOfAttachmentsToFetchInInitialSync;
- (long long)_numberOfMetadataBatchesOfAttachmentsToFetchInInitialSync;
- (id)_operationErrorForModifyingRecordCompletion:(id)arg1;
- (void)_processAndValidateAttachmentRecordsEligibleForPurge:(id)arg1 recordIDsToTransfers:(id)arg2 capturedWithABC:(bool)arg3 completion:(id /* block */)arg4;
- (void)_processAssetFetchOperationCompletionBlock:(id)arg1 removeTombstones:(bool)arg2 operationID:(id)arg3 error:(id)arg4;
- (void)_processAssetFetchPerRecordCompletionBlock:(id)arg1 recordID:(id)arg2 error:(id)arg3;
- (void)_processAssetFetchPerRecordProgressBlock:(id)arg1 progress:(double)arg2;
- (void)_processFetchRecordChangesCompleted:(id)arg1 completionBlock:(id /* block */)arg2;
- (void)_processModifyPerRecordCallBack:(id)arg1 error:(id)arg2;
- (void)_processModifyRecordCompletion:(id)arg1 deletedRecordIDs:(id)arg2 error:(id)arg3 completionBlock:(id /* block */)arg4;
- (void)_processRecordChanged:(id)arg1;
- (void)_processRecordDeletion:(id)arg1;
- (void)_processRecordZoneChangeTokenUpdated:(id)arg1 zoneID:(id)arg2 clienChangeToken:(id)arg3 syncType:(long long)arg4;
- (void)_processRecordZoneFetchCompletion:(id)arg1 zoneID:(id)arg2 clientChangeTokenData:(id)arg3 moreComing:(bool)arg4 shouldWriteBackChanges:(bool)arg5 desiredKeys:(long long)arg6 syncType:(long long)arg7 error:(id)arg8 currentBatchCount:(long long)arg9 maxBatchCount:(long long)arg10 activity:(id)arg11 completionBlock:(id /* block */)arg12;
- (unsigned long long)_readNextDeleteAfterRow;
- (id)_recordKeyManagerSharedInstance;
- (id)_recordsToProcessWithError:(id)arg1 error:(id)arg2;
- (void)_removeTransferFromiCloudBackupWithGuid:(id)arg1;
- (void)_resetAttachmentSyncStateForRecord:(id)arg1 toState:(long long)arg2;
- (int)_resyncForDeleteRecoveryState;
- (void)_scheduleOperation:(id)arg1;
- (void)_setNextDeleteAfterRow:(unsigned long long)arg1;
- (bool)_shouldMarkAllAttachmentsAsNeedingSync;
- (bool)_shouldMarkAttachmentsAsNeedingReupload;
- (id)_updateAttachmentGUIDIfNeededAndReturnTransfersToForceMarkAsSync:(id)arg1 transfersToSyncRowIDs:(id)arg2;
- (void)_updateDeviceConditionsToCheckIfNeededForCurrentBatchCount:(long long)arg1 maxBatchCount:(long long)arg2;
- (void)_updateTransferUsingCKRecord:(id)arg1 wasFetched:(bool)arg2 dispatchToMain:(bool)arg3;
- (void)_validateTransferFromCloudKit:(id)arg1 localTransfer:(id)arg2 validateCompletion:(id /* block */)arg3;
- (void)_writeAttachmentsToCloudKitWithActivity:(id)arg1 completionBlock:(id /* block */)arg2;
- (void)_writeCKRecordsToAttachmentZone:(id)arg1 activity:(id)arg2 withCompletion:(id /* block */)arg3;
- (void)acceptFileTransfer:(id)arg1 completion:(id /* block */)arg2;
- (void)acceptFileTransfers:(id)arg1 completion:(id /* block */)arg2;
- (bool)assetDownloadInProgress;
- (id)ckQueue;
- (void)clearLocalSyncState:(unsigned long long)arg1;
- (id)completionBlocksForAssetFetchOperations;
- (void)deleteAttachmentSyncToken;
- (void)deleteAttachmentZone;
- (unsigned long long)deviceConditionsToCheck;
- (id)downloadAssetsForTransferGUIDs;
- (void)downloadAttachmentAssetsForChatIDs:(id)arg1 services:(id)arg2 style:(unsigned char)arg3 completion:(id /* block */)arg4;
- (void)downloadAttachmentAssetsWithActivity:(id)arg1 restoringAttachments:(bool)arg2;
- (void)downloadAttachmentAssetsWithActivity:(id)arg1 restoringAttachments:(bool)arg2 completion:(id /* block */)arg3;
- (void)fetchAttachmentDataForTransfers:(id)arg1 highQuality:(bool)arg2 perTransferProgress:(id /* block */)arg3 activity:(id)arg4 completion:(id /* block */)arg5;
- (id)fileTransferCenter;
- (id)init;
- (id)initWithSyncTokenStore:(id)arg1;
- (bool)isDoingDeleteRecoverySync;
- (id)latestSyncTokenForSyncType:(long long)arg1;
- (id /* block */)perTransferProgress;
- (unsigned long long)purgedAttachmentsCountForChatsWithChatIdentifiers:(id)arg1 services:(id)arg2;
- (id)purgedAttachmentsForChat:(id)arg1 services:(id)arg2 limit:(long long)arg3;
- (id)recordIDToTransferMap;
- (id)recordStore;
- (id)recordZoneManager;
- (void)setAssetDownloadInProgress:(bool)arg1;
- (void)setCKOperationFactory:(id)arg1;
- (void)setCkQueue:(id)arg1;
- (void)setCompletionBlocksForAssetFetchOperations:(id)arg1;
- (void)setDeviceConditionsToCheck:(unsigned long long)arg1;
- (void)setDownloadAssetsForTransferGUIDs:(id)arg1;
- (void)setIsDoingDeleteRecoverySync:(bool)arg1;
- (void)setLatestSyncToken:(id)arg1 forSyncType:(long long)arg2;
- (void)setPerTransferProgress:(id /* block */)arg1;
- (void)setRecordIDToTransferMap:(id)arg1;
- (void)setRecordZoneManager:(id)arg1;
- (void)setSyncTokenStore:(id)arg1;
- (void)syncAttachmentDeletesToCloudKitWithActivity:(id)arg1 completion:(id /* block */)arg2;
- (void)syncAttachmentsWithSyncType:(long long)arg1 deviceConditionsToCheck:(unsigned long long)arg2 activity:(id)arg3 completionBlock:(id /* block */)arg4;
- (long long)syncControllerRecordType;
- (id)syncTokenStore;

@end
